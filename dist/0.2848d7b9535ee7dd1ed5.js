webpackJsonp([0,4],{"./client/modules/photobooth/actions.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFromBackEnd=t.getCloudinaryData=void 0;var o=n("./node_modules/react-redux-toastr/lib/index.js"),r=n("./client/modules/photobooth/types.js"),a=n("./client/modules/photobooth/apiMethods.js");t.getCloudinaryData=function(e,t){return{type:r.CLOUDINARY_DATA,promise:(0,a.sendToBackEnd)(t),meta:{onFailure:function(){return o.toastr.warning("Failure!","Upload Failed!")},onSuccess:function(){return o.toastr.success("Success!","Successfully Uploaded!")}}}},t.getFromBackEnd=function(){return{type:r.DATABASE_IMAGES,promise:(0,a.fetchFromBackEnd)(),meta:{onFailure:function(){return o.toastr.warning("Failure!","Database Error.")}}}}},"./client/modules/photobooth/apiMethods.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.fetchFromBackEnd=t.sendToBackEnd=void 0;var r=n("./node_modules/axios/index.js"),a=o(r);t.sendToBackEnd=function(e){return a.default.post("/library",{result:e})},t.fetchFromBackEnd=function(){return a.default.get("/library")}},"./client/modules/photobooth/library/Library.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n("./node_modules/react/react.js"),c=o(i),s=n("./node_modules/semantic-ui-react/dist/es/index.js"),d=n("./client/commons/index.js"),f=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),l(t,[{key:"componentDidMount",value:function(){this.props.getFromBackEnd()}},{key:"render",value:function(){var e=this.props,t=e.photos,n=e.translate;if(!t.isFetched)return c.default.createElement(d.LoadingScreen,null);var o=t.server.reduce(function(e,t){var n=t._id,o=t.url;return o||e.push(c.default.createElement(s.Image,{key:n,size:"tiny"},c.default.createElement(s.Label,{content:"Image not found!",icon:"warning"}))),e.push(c.default.createElement(s.Image,{key:n,src:o})),e},[]);return c.default.createElement("div",{className:"library"},0===t.server.length?c.default.createElement("div",{className:"initial"},c.default.createElement("h1",null,n("no-img")),c.default.createElement("h1",null,n("upload-prompt"))):c.default.createElement("div",{className:"images"},c.default.createElement(s.Image.Group,{size:"tiny"},o)))}}]),t}(i.Component);f.propTypes={getFromBackEnd:i.PropTypes.func.isRequired,photos:i.PropTypes.object,translate:i.PropTypes.func},t.default=f},"./client/modules/photobooth/library/LibraryContainer.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react-redux/es/index.js"),a=n("./node_modules/react-redux-multilingual/lib/index.js"),u=n("./client/modules/photobooth/library/Library.js"),l=o(u),i=n("./client/modules/photobooth/actions.js"),c=function(e){var t=e.photo;return{photos:t}};t.default=(0,r.connect)(c,{getFromBackEnd:i.getFromBackEnd})((0,a.withTranslate)(l.default))},"./client/modules/photobooth/sidebar/Sidebar.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n("./node_modules/react/react.js"),c=o(i),s=n("./node_modules/semantic-ui-react/dist/es/index.js"),d=n("./client/modules/photobooth/library/LibraryContainer.js"),f=o(d),p=n("./client/utils/index.js"),m=function(e){function t(){var e,n,o,u;r(this,t);for(var l=arguments.length,i=Array(l),c=0;c<l;c++)i[c]=arguments[c];return n=o=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.state={visible:!0},u=n,a(o,u)}return u(t,e),l(t,[{key:"render",value:function(){var e=this.state.visible,t=this.props,n=t.getCloudinaryData,o=t.translate;return c.default.createElement("div",{className:"sidebar"},c.default.createElement(s.Sidebar.Pushable,{as:s.Segment},c.default.createElement(s.Sidebar,{as:s.Menu,width:"thin",icon:"labeled",visible:e,vertical:!0,inverted:!0},c.default.createElement(s.Menu.Item,{name:"upload"},c.default.createElement(s.Icon,{name:"cloud upload",onClick:function(){return(0,p.openWidget)(n)}}),o("upload")),c.default.createElement(s.Menu.Item,{name:"filter"},c.default.createElement(s.Icon,{name:"filter"}),o("filter")),c.default.createElement(s.Menu.Item,{name:"chat"},c.default.createElement(s.Icon,{name:"chat"}),o("chat")),c.default.createElement(s.Menu.Item,{name:"help"},c.default.createElement(s.Icon,{name:"help"}),o("help"))),c.default.createElement(s.Sidebar.Pusher,null,c.default.createElement(s.Segment,{basic:!0},c.default.createElement(f.default,null)))))}}]),t}(i.Component);s.Sidebar.propTypes={defaultVisible:i.PropTypes.bool,getCloudinaryData:i.PropTypes.func,translate:i.PropTypes.func,visible:i.PropTypes.bool},t.default=m},"./client/modules/photobooth/sidebar/SidebarContainer.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react-redux/es/index.js"),a=n("./node_modules/react-redux-multilingual/lib/index.js"),u=n("./client/modules/auth/wrapper/index.js"),l=n("./client/modules/photobooth/sidebar/Sidebar.js"),i=o(l),c=n("./client/modules/photobooth/actions.js");t.default=(0,r.connect)(null,{getCloudinaryData:c.getCloudinaryData})((0,u.UserIsAuthenticated)((0,a.withTranslate)(i.default)))}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vMC4yODQ4ZDdiOTUzNWVlN2RkMWVkNS5qcyIsIndlYnBhY2s6Ly8vLi9jbGllbnQvbW9kdWxlcy9waG90b2Jvb3RoL2FjdGlvbnMuanMiLCJ3ZWJwYWNrOi8vLy4vY2xpZW50L21vZHVsZXMvcGhvdG9ib290aC9hcGlNZXRob2RzLmpzIiwid2VicGFjazovLy8uL2NsaWVudC9tb2R1bGVzL3Bob3RvYm9vdGgvbGlicmFyeS9MaWJyYXJ5LmpzIiwid2VicGFjazovLy8uL2NsaWVudC9tb2R1bGVzL3Bob3RvYm9vdGgvbGlicmFyeS9MaWJyYXJ5Q29udGFpbmVyLmpzIiwid2VicGFjazovLy8uL2NsaWVudC9tb2R1bGVzL3Bob3RvYm9vdGgvc2lkZWJhci9TaWRlYmFyLmpzIiwid2VicGFjazovLy8uL2NsaWVudC9tb2R1bGVzL3Bob3RvYm9vdGgvc2lkZWJhci9TaWRlYmFyQ29udGFpbmVyLmpzIl0sIm5hbWVzIjpbIndlYnBhY2tKc29ucCIsIi4vY2xpZW50L21vZHVsZXMvcGhvdG9ib290aC9hY3Rpb25zLmpzIiwibW9kdWxlIiwiZXhwb3J0cyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwiZ2V0RnJvbUJhY2tFbmQiLCJnZXRDbG91ZGluYXJ5RGF0YSIsInVuZGVmaW5lZCIsIl9yZWFjdFJlZHV4VG9hc3RyIiwiX3R5cGVzIiwiX2FwaU1ldGhvZHMiLCJlcnJvciIsInJlc3VsdCIsInR5cGUiLCJwcm9taXNlIiwic2VuZFRvQmFja0VuZCIsIm1ldGEiLCJvbkZhaWx1cmUiLCJ0b2FzdHIiLCJ3YXJuaW5nIiwib25TdWNjZXNzIiwic3VjY2VzcyIsImZldGNoRnJvbUJhY2tFbmQiLCIuL2NsaWVudC9tb2R1bGVzL3Bob3RvYm9vdGgvYXBpTWV0aG9kcy5qcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIl9heGlvcyIsIl9heGlvczIiLCJwb3N0IiwiZ2V0IiwiLi9jbGllbnQvbW9kdWxlcy9waG90b2Jvb3RoL2xpYnJhcnkvTGlicmFyeS5qcyIsIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsInNlbGYiLCJjYWxsIiwiUmVmZXJlbmNlRXJyb3IiLCJfaW5oZXJpdHMiLCJzdWJDbGFzcyIsInN1cGVyQ2xhc3MiLCJwcm90b3R5cGUiLCJjcmVhdGUiLCJjb25zdHJ1Y3RvciIsImVudW1lcmFibGUiLCJ3cml0YWJsZSIsImNvbmZpZ3VyYWJsZSIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiaSIsImxlbmd0aCIsImRlc2NyaXB0b3IiLCJrZXkiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJfcmVhY3QiLCJfcmVhY3QyIiwiX3NlbWFudGljVWlSZWFjdCIsIl9jb21tb25zIiwiTGlicmFyeSIsIl9Db21wb25lbnQiLCJ0aGlzIiwiZ2V0UHJvdG90eXBlT2YiLCJhcHBseSIsImFyZ3VtZW50cyIsIl9wcm9wcyIsInBob3RvcyIsInRyYW5zbGF0ZSIsImlzRmV0Y2hlZCIsImNyZWF0ZUVsZW1lbnQiLCJMb2FkaW5nU2NyZWVuIiwiaW1hZ2VzIiwic2VydmVyIiwicmVkdWNlIiwiYXJyYXkiLCJpdGVtIiwiX2lkIiwidXJsIiwicHVzaCIsIkltYWdlIiwic2l6ZSIsIkxhYmVsIiwiY29udGVudCIsImljb24iLCJzcmMiLCJjbGFzc05hbWUiLCJHcm91cCIsIkNvbXBvbmVudCIsInByb3BUeXBlcyIsIlByb3BUeXBlcyIsImZ1bmMiLCJpc1JlcXVpcmVkIiwib2JqZWN0IiwiLi9jbGllbnQvbW9kdWxlcy9waG90b2Jvb3RoL2xpYnJhcnkvTGlicmFyeUNvbnRhaW5lci5qcyIsIl9lcyIsIl9yZWFjdFJlZHV4TXVsdGlsaW5ndWFsIiwiX0xpYnJhcnkiLCJfTGlicmFyeTIiLCJfYWN0aW9ucyIsIm1hcFN0YXRlVG9Qcm9wcyIsIl9yZWYiLCJwaG90byIsImNvbm5lY3QiLCJ3aXRoVHJhbnNsYXRlIiwiLi9jbGllbnQvbW9kdWxlcy9waG90b2Jvb3RoL3NpZGViYXIvU2lkZWJhci5qcyIsIl9MaWJyYXJ5Q29udGFpbmVyIiwiX0xpYnJhcnlDb250YWluZXIyIiwiX3V0aWxzIiwiU2lkZUJhciIsIl90ZW1wIiwiX3RoaXMiLCJfcmV0IiwiX2xlbiIsImFyZ3MiLCJBcnJheSIsIl9rZXkiLCJjb25jYXQiLCJzdGF0ZSIsInZpc2libGUiLCJTaWRlYmFyIiwiUHVzaGFibGUiLCJhcyIsIlNlZ21lbnQiLCJNZW51Iiwid2lkdGgiLCJ2ZXJ0aWNhbCIsImludmVydGVkIiwiSXRlbSIsIm5hbWUiLCJJY29uIiwib25DbGljayIsIm9wZW5XaWRnZXQiLCJQdXNoZXIiLCJiYXNpYyIsImRlZmF1bHRWaXNpYmxlIiwiYm9vbCIsIi4vY2xpZW50L21vZHVsZXMvcGhvdG9ib290aC9zaWRlYmFyL1NpZGViYXJDb250YWluZXIuanMiLCJfd3JhcHBlciIsIl9TaWRlYmFyIiwiX1NpZGViYXIyIiwiVXNlcklzQXV0aGVudGljYXRlZCJdLCJtYXBwaW5ncyI6IkFBQUFBLGNBQWMsRUFBRSxJQUVWQyx5Q0FDQSxTQUFTQyxFQUFRQyxFQUFTQyxHQUVoQyxZQUdBQyxRQUFPQyxlQUFlSCxFQUFTLGNBQzdCSSxPQUFPLElBRVRKLEVBQVFLLGVBQWlCTCxFQUFRTSxrQkFBb0JDLE1DWHJELElBQUFDLEdBQUFQLEVBQUEsa0RBQ0FRLEVBQUFSLEVBQUEsd0NBQ0FTLEVBQUFULEVBQUEsNENBRWFLLHFCQUFvQixTQUFDSyxFQUFPQyxHQUFSLE9BRTdCQyx1QkFDQUMsU0FBUyxFQUFBSixFQUFBSyxlQUFjSCxHQUN2QkksTUFDRUMsVUFBVyxpQkFBTVQsR0FBQVUsT0FBT0MsUUFBUSxXQUFZLG1CQUM1Q0MsVUFBVyxpQkFBTVosR0FBQVUsT0FBT0csUUFB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VThDLE1MaVNyQjlJLEVBQVEyQixRSzlST3dGLEdMa1NUNEIsMERBQ0EsU0FBU2hKLEVBQVFDLEVBQVNDLEdBRWhDLFlBbUJBLFNBQVN1QixHQUF1QkMsR0FBTyxNQUFPQSxJQUFPQSxFQUFJQyxXQUFhRCxHQUFRRSxRQUFTRixHQWhCdkZ2QixPQUFPQyxlQUFlSCxFQUFTLGNBQzdCSSxPQUFPLEdNcldULElBQUFpRyxHQUFBcEcsRUFBQSwwQ0FDQXFHLEVBQUFyRyxFQUFBLHdEQUNBK0ksRUFBQS9JLEVBQUEsMENBQ0FnSixFQUFBaEosRUFBQSxrRE42V0lpSixFQUFZMUgsRUFBdUJ5SCxHTTVXdkN4QyxFQUFBeEcsRUFBQSx5Q05rWEFELEdBQVEyQixTTWhYTyxFQUFBMEUsRUFBQVEsU0FDYixNQUNFdkcseUNBQ0YsRUFBQTBJLEVBQUFHLHNCQUFvQixFQUFBN0MsRUFBQVEsZUFBQW9DLEVBQUF2SCIsImZpbGUiOiIwLjI4NDhkN2I5NTM1ZWU3ZGQxZWQ1LmpzIiwic291cmNlc0NvbnRlbnQiOlsid2VicGFja0pzb25wKFswLDRdLHtcblxuLyoqKi8gXCIuL2NsaWVudC9tb2R1bGVzL3Bob3RvYm9vdGgvYWN0aW9ucy5qc1wiOlxuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmdldEZyb21CYWNrRW5kID0gZXhwb3J0cy5nZXRDbG91ZGluYXJ5RGF0YSA9IHVuZGVmaW5lZDtcblxudmFyIF9yZWFjdFJlZHV4VG9hc3RyID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3JlYWN0LXJlZHV4LXRvYXN0ci9saWIvaW5kZXguanNcIik7XG5cbnZhciBfdHlwZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9jbGllbnQvbW9kdWxlcy9waG90b2Jvb3RoL3R5cGVzLmpzXCIpO1xuXG52YXIgX2FwaU1ldGhvZHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9jbGllbnQvbW9kdWxlcy9waG90b2Jvb3RoL2FwaU1ldGhvZHMuanNcIik7XG5cbnZhciBnZXRDbG91ZGluYXJ5RGF0YSA9IGV4cG9ydHMuZ2V0Q2xvdWRpbmFyeURhdGEgPSBmdW5jdGlvbiBnZXRDbG91ZGluYXJ5RGF0YShlcnJvciwgcmVzdWx0KSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogX3R5cGVzLkNMT1VESU5BUllfREFUQSxcbiAgICBwcm9taXNlOiAoMCwgX2FwaU1ldGhvZHMuc2VuZFRvQmFja0VuZCkocmVzdWx0KSwgLy8gUE9TVCBSZXF1ZXN0IHRvIEFQSSBTZXJ2ZXJcbiAgICBtZXRhOiB7XG4gICAgICBvbkZhaWx1cmU6IGZ1bmN0aW9uIG9uRmFpbHVyZSgpIHtcbiAgICAgICAgcmV0dXJuIF9yZWFjdFJlZHV4VG9hc3RyLnRvYXN0ci53YXJuaW5nKCdGYWlsdXJlIScsICdVcGxvYWQgRmFpbGVkIScpO1xuICAgICAgfSxcbiAgICAgIG9uU3VjY2VzczogZnVuY3Rpb24gb25TdWNjZXNzKCkge1xuICAgICAgICByZXR1cm4gX3JlYWN0UmVkdXhUb2FzdHIudG9hc3RyLnN1Y2Nlc3MoJ1N1Y2Nlc3MhJywgJ1N1Y2Nlc3NmdWxseSBVcGxvYWRlZCEnKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59O1xuXG52YXIgZ2V0RnJvbUJhY2tFbmQgPSBleHBvcnRzLmdldEZyb21CYWNrRW5kID0gZnVuY3Rpb24gZ2V0RnJvbUJhY2tFbmQoKSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogX3R5cGVzLkRBVEFCQVNFX0lNQUdFUyxcbiAgICBwcm9taXNlOiAoMCwgX2FwaU1ldGhvZHMuZmV0Y2hGcm9tQmFja0VuZCkoKSwgLy8gR0VUIFJlcXVlc3QgdG8gQVBJIFNlcnZlclxuICAgIG1ldGE6IHtcbiAgICAgIG9uRmFpbHVyZTogZnVuY3Rpb24gb25GYWlsdXJlKCkge1xuICAgICAgICByZXR1cm4gX3JlYWN0UmVkdXhUb2FzdHIudG9hc3RyLndhcm5pbmcoJ0ZhaWx1cmUhJywgJ0RhdGFiYXNlIEVycm9yLicpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn07XG5cbi8qKiovIH0sXG5cbi8qKiovIFwiLi9jbGllbnQvbW9kdWxlcy9waG90b2Jvb3RoL2FwaU1ldGhvZHMuanNcIjpcbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5mZXRjaEZyb21CYWNrRW5kID0gZXhwb3J0cy5zZW5kVG9CYWNrRW5kID0gdW5kZWZpbmVkO1xuXG52YXIgX2F4aW9zID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL2F4aW9zL2luZGV4LmpzXCIpO1xuXG52YXIgX2F4aW9zMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2F4aW9zKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIHNlbmRUb0JhY2tFbmQgPSBleHBvcnRzLnNlbmRUb0JhY2tFbmQgPSBmdW5jdGlvbiBzZW5kVG9CYWNrRW5kKHJlc3VsdCkge1xuICByZXR1cm4gX2F4aW9zMi5kZWZhdWx0LnBvc3QoJy9saWJyYXJ5JywgeyByZXN1bHQ6IHJlc3VsdCB9KTtcbn07XG5cbnZhciBmZXRjaEZyb21CYWNrRW5kID0gZXhwb3J0cy5mZXRjaEZyb21CYWNrRW5kID0gZnVuY3Rpb24gZmV0Y2hGcm9tQmFja0VuZCgpIHtcbiAgcmV0dXJuIF9heGlvczIuZGVmYXVsdC5nZXQoJy9saWJyYXJ5Jyk7XG59O1xuXG4vKioqLyB9LFxuXG4vKioqLyBcIi4vY2xpZW50L21vZHVsZXMvcGhvdG9ib290aC9saWJyYXJ5L0xpYnJhcnkuanNcIjpcbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3JlYWN0L3JlYWN0LmpzXCIpO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9zZW1hbnRpY1VpUmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9ub2RlX21vZHVsZXMvc2VtYW50aWMtdWktcmVhY3QvZGlzdC9lcy9pbmRleC5qc1wiKTtcblxudmFyIF9jb21tb25zID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vY2xpZW50L2NvbW1vbnMvaW5kZXguanNcIik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIExpYnJhcnkgPSBmdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoTGlicmFyeSwgX0NvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gTGlicmFyeSgpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTGlicmFyeSk7XG5cbiAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKExpYnJhcnkuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihMaWJyYXJ5KSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoTGlicmFyeSwgW3tcbiAgICBrZXk6ICdjb21wb25lbnREaWRNb3VudCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgLy8gcGVyZm9ybSBHRVQgUmVxdWVzdCBmb3IgYXBwZW5kaW5nIGltYWdlcy5cbiAgICAgIHRoaXMucHJvcHMuZ2V0RnJvbUJhY2tFbmQoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdyZW5kZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgX3Byb3BzID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICBwaG90b3MgPSBfcHJvcHMucGhvdG9zLFxuICAgICAgICAgIHRyYW5zbGF0ZSA9IF9wcm9wcy50cmFuc2xhdGU7XG5cbiAgICAgIGlmICghcGhvdG9zLmlzRmV0Y2hlZCkgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9jb21tb25zLkxvYWRpbmdTY3JlZW4sIG51bGwpO1xuXG4gICAgICAvLyBXaGVyZSBhcnJheSBvZiBvYmplY3QocykgaXMgcHJvY2Vzc2VkIGZvciByZW5kZXJpbmcvcmUtcmVuZGVyaW5nLlxuICAgICAgdmFyIGltYWdlcyA9IHBob3Rvcy5zZXJ2ZXIucmVkdWNlKGZ1bmN0aW9uIChhcnJheSwgaXRlbSkge1xuICAgICAgICB2YXIgX2lkID0gaXRlbS5faWQsXG4gICAgICAgICAgICB1cmwgPSBpdGVtLnVybDtcblxuICAgICAgICBpZiAoIXVybCkge1xuICAgICAgICAgIGFycmF5LnB1c2goX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICBfc2VtYW50aWNVaVJlYWN0LkltYWdlLFxuICAgICAgICAgICAgeyBrZXk6IF9pZCwgc2l6ZTogJ3RpbnknIH0sXG4gICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfc2VtYW50aWNVaVJlYWN0LkxhYmVsLCB7IGNvbnRlbnQ6ICdJbWFnZSBub3QgZm91bmQhJywgaWNvbjogJ3dhcm5pbmcnIH0pXG4gICAgICAgICAgKSk7XG4gICAgICAgIH1cbiAgICAgICAgYXJyYXkucHVzaChfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfc2VtYW50aWNVaVJlYWN0LkltYWdlLCB7XG4gICAgICAgICAga2V5OiBfaWQsXG4gICAgICAgICAgc3JjOiB1cmxcbiAgICAgICAgfSkpO1xuICAgICAgICByZXR1cm4gYXJyYXk7XG4gICAgICB9LCBbXSk7XG5cbiAgICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgJ2RpdicsXG4gICAgICAgIHsgY2xhc3NOYW1lOiAnbGlicmFyeScgfSxcbiAgICAgICAgcGhvdG9zLnNlcnZlci5sZW5ndGggPT09IDAgPyBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICB7IGNsYXNzTmFtZTogJ2luaXRpYWwnIH0sXG4gICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAnaDEnLFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIHRyYW5zbGF0ZSgnbm8taW1nJylcbiAgICAgICAgICApLFxuICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ2gxJyxcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICB0cmFuc2xhdGUoJ3VwbG9hZC1wcm9tcHQnKVxuICAgICAgICAgIClcbiAgICAgICAgKSA6IF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICdkaXYnLFxuICAgICAgICAgIHsgY2xhc3NOYW1lOiAnaW1hZ2VzJyB9LFxuICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgX3NlbWFudGljVWlSZWFjdC5JbWFnZS5Hcm91cCxcbiAgICAgICAgICAgIHsgc2l6ZTogJ3RpbnknIH0sXG4gICAgICAgICAgICBpbWFnZXNcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIExpYnJhcnk7XG59KF9yZWFjdC5Db21wb25lbnQpO1xuXG5MaWJyYXJ5LnByb3BUeXBlcyA9IHtcbiAgZ2V0RnJvbUJhY2tFbmQ6IF9yZWFjdC5Qcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICBwaG90b3M6IF9yZWFjdC5Qcm9wVHlwZXMub2JqZWN0LFxuICB0cmFuc2xhdGU6IF9yZWFjdC5Qcm9wVHlwZXMuZnVuY1xufTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gTGlicmFyeTtcblxuLyoqKi8gfSxcblxuLyoqKi8gXCIuL2NsaWVudC9tb2R1bGVzL3Bob3RvYm9vdGgvbGlicmFyeS9MaWJyYXJ5Q29udGFpbmVyLmpzXCI6XG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9lcyA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9yZWFjdC1yZWR1eC9lcy9pbmRleC5qc1wiKTtcblxudmFyIF9yZWFjdFJlZHV4TXVsdGlsaW5ndWFsID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3JlYWN0LXJlZHV4LW11bHRpbGluZ3VhbC9saWIvaW5kZXguanNcIik7XG5cbnZhciBfTGlicmFyeSA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL2NsaWVudC9tb2R1bGVzL3Bob3RvYm9vdGgvbGlicmFyeS9MaWJyYXJ5LmpzXCIpO1xuXG52YXIgX0xpYnJhcnkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTGlicmFyeSk7XG5cbnZhciBfYWN0aW9ucyA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL2NsaWVudC9tb2R1bGVzL3Bob3RvYm9vdGgvYWN0aW9ucy5qc1wiKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIG1hcFN0YXRlVG9Qcm9wcyA9IGZ1bmN0aW9uIG1hcFN0YXRlVG9Qcm9wcyhfcmVmKSB7XG4gIHZhciBwaG90byA9IF9yZWYucGhvdG87XG4gIHJldHVybiB7IHBob3RvczogcGhvdG8gfTtcbn07XG5cbmV4cG9ydHMuZGVmYXVsdCA9ICgwLCBfZXMuY29ubmVjdCkobWFwU3RhdGVUb1Byb3BzLCB7IGdldEZyb21CYWNrRW5kOiBfYWN0aW9ucy5nZXRGcm9tQmFja0VuZCB9KSgoMCwgX3JlYWN0UmVkdXhNdWx0aWxpbmd1YWwud2l0aFRyYW5zbGF0ZSkoX0xpYnJhcnkyLmRlZmF1bHQpKTtcblxuLyoqKi8gfSxcblxuLyoqKi8gXCIuL2NsaWVudC9tb2R1bGVzL3Bob3RvYm9vdGgvc2lkZWJhci9TaWRlYmFyLmpzXCI6XG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9yZWFjdC9yZWFjdC5qc1wiKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfc2VtYW50aWNVaVJlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3NlbWFudGljLXVpLXJlYWN0L2Rpc3QvZXMvaW5kZXguanNcIik7XG5cbnZhciBfTGlicmFyeUNvbnRhaW5lciA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL2NsaWVudC9tb2R1bGVzL3Bob3RvYm9vdGgvbGlicmFyeS9MaWJyYXJ5Q29udGFpbmVyLmpzXCIpO1xuXG52YXIgX0xpYnJhcnlDb250YWluZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTGlicmFyeUNvbnRhaW5lcik7XG5cbnZhciBfdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9jbGllbnQvdXRpbHMvaW5kZXguanNcIik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIFNpZGVCYXIgPSBmdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoU2lkZUJhciwgX0NvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gU2lkZUJhcigpIHtcbiAgICB2YXIgX3JlZjtcblxuICAgIHZhciBfdGVtcCwgX3RoaXMsIF9yZXQ7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU2lkZUJhcik7XG5cbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICByZXR1cm4gX3JldCA9IChfdGVtcCA9IChfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChfcmVmID0gU2lkZUJhci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFNpZGVCYXIpKS5jYWxsLmFwcGx5KF9yZWYsIFt0aGlzXS5jb25jYXQoYXJncykpKSwgX3RoaXMpLCBfdGhpcy5zdGF0ZSA9IHsgdmlzaWJsZTogdHJ1ZSB9LCBfdGVtcCksIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKF90aGlzLCBfcmV0KTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhTaWRlQmFyLCBbe1xuICAgIGtleTogJ3JlbmRlcicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciB2aXNpYmxlID0gdGhpcy5zdGF0ZS52aXNpYmxlO1xuICAgICAgdmFyIF9wcm9wcyA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgZ2V0Q2xvdWRpbmFyeURhdGEgPSBfcHJvcHMuZ2V0Q2xvdWRpbmFyeURhdGEsXG4gICAgICAgICAgdHJhbnNsYXRlID0gX3Byb3BzLnRyYW5zbGF0ZTtcblxuICAgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAnZGl2JyxcbiAgICAgICAgeyBjbGFzc05hbWU6ICdzaWRlYmFyJyB9LFxuICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICBfc2VtYW50aWNVaVJlYWN0LlNpZGViYXIuUHVzaGFibGUsXG4gICAgICAgICAgeyBhczogX3NlbWFudGljVWlSZWFjdC5TZWdtZW50IH0sXG4gICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICBfc2VtYW50aWNVaVJlYWN0LlNpZGViYXIsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGFzOiBfc2VtYW50aWNVaVJlYWN0Lk1lbnUsXG4gICAgICAgICAgICAgIHdpZHRoOiAndGhpbicsXG4gICAgICAgICAgICAgIGljb246ICdsYWJlbGVkJyxcbiAgICAgICAgICAgICAgdmlzaWJsZTogdmlzaWJsZSxcbiAgICAgICAgICAgICAgdmVydGljYWw6IHRydWUsXG4gICAgICAgICAgICAgIGludmVydGVkOiB0cnVlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgIF9zZW1hbnRpY1VpUmVhY3QuTWVudS5JdGVtLFxuICAgICAgICAgICAgICB7IG5hbWU6ICd1cGxvYWQnIH0sXG4gICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9zZW1hbnRpY1VpUmVhY3QuSWNvbiwge1xuICAgICAgICAgICAgICAgIG5hbWU6ICdjbG91ZCB1cGxvYWQnLFxuICAgICAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gKDAsIF91dGlscy5vcGVuV2lkZ2V0KShnZXRDbG91ZGluYXJ5RGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgdHJhbnNsYXRlKCd1cGxvYWQnKVxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICBfc2VtYW50aWNVaVJlYWN0Lk1lbnUuSXRlbSxcbiAgICAgICAgICAgICAgeyBuYW1lOiAnZmlsdGVyJyB9LFxuICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfc2VtYW50aWNVaVJlYWN0Lkljb24sIHsgbmFtZTogJ2ZpbHRlcicgfSksXG4gICAgICAgICAgICAgIHRyYW5zbGF0ZSgnZmlsdGVyJylcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgX3NlbWFudGljVWlSZWFjdC5NZW51Lkl0ZW0sXG4gICAgICAgICAgICAgIHsgbmFtZTogJ2NoYXQnIH0sXG4gICAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9zZW1hbnRpY1VpUmVhY3QuSWNvbiwgeyBuYW1lOiAnY2hhdCcgfSksXG4gICAgICAgICAgICAgIHRyYW5zbGF0ZSgnY2hhdCcpXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgIF9zZW1hbnRpY1VpUmVhY3QuTWVudS5JdGVtLFxuICAgICAgICAgICAgICB7IG5hbWU6ICdoZWxwJyB9LFxuICAgICAgICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfc2VtYW50aWNVaVJlYWN0Lkljb24sIHsgbmFtZTogJ2hlbHAnIH0pLFxuICAgICAgICAgICAgICB0cmFuc2xhdGUoJ2hlbHAnKVxuICAgICAgICAgICAgKVxuICAgICAgICAgICksXG4gICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICBfc2VtYW50aWNVaVJlYWN0LlNpZGViYXIuUHVzaGVyLFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICBfc2VtYW50aWNVaVJlYWN0LlNlZ21lbnQsXG4gICAgICAgICAgICAgIHsgYmFzaWM6IHRydWUgfSxcbiAgICAgICAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX0xpYnJhcnlDb250YWluZXIyLmRlZmF1bHQsIG51bGwpXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBTaWRlQmFyO1xufShfcmVhY3QuQ29tcG9uZW50KTtcblxuX3NlbWFudGljVWlSZWFjdC5TaWRlYmFyLnByb3BUeXBlcyA9IHtcbiAgZGVmYXVsdFZpc2libGU6IF9yZWFjdC5Qcm9wVHlwZXMuYm9vbCxcbiAgZ2V0Q2xvdWRpbmFyeURhdGE6IF9yZWFjdC5Qcm9wVHlwZXMuZnVuYyxcbiAgdHJhbnNsYXRlOiBfcmVhY3QuUHJvcFR5cGVzLmZ1bmMsXG4gIHZpc2libGU6IF9yZWFjdC5Qcm9wVHlwZXMuYm9vbFxufTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gU2lkZUJhcjtcblxuLyoqKi8gfSxcblxuLyoqKi8gXCIuL2NsaWVudC9tb2R1bGVzL3Bob3RvYm9vdGgvc2lkZWJhci9TaWRlYmFyQ29udGFpbmVyLmpzXCI6XG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9lcyA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL25vZGVfbW9kdWxlcy9yZWFjdC1yZWR1eC9lcy9pbmRleC5qc1wiKTtcblxudmFyIF9yZWFjdFJlZHV4TXVsdGlsaW5ndWFsID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vbm9kZV9tb2R1bGVzL3JlYWN0LXJlZHV4LW11bHRpbGluZ3VhbC9saWIvaW5kZXguanNcIik7XG5cbnZhciBfd3JhcHBlciA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL2NsaWVudC9tb2R1bGVzL2F1dGgvd3JhcHBlci9pbmRleC5qc1wiKTtcblxudmFyIF9TaWRlYmFyID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vY2xpZW50L21vZHVsZXMvcGhvdG9ib290aC9zaWRlYmFyL1NpZGViYXIuanNcIik7XG5cbnZhciBfU2lkZWJhcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9TaWRlYmFyKTtcblxudmFyIF9hY3Rpb25zID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vY2xpZW50L21vZHVsZXMvcGhvdG9ib290aC9hY3Rpb25zLmpzXCIpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5leHBvcnRzLmRlZmF1bHQgPSAoMCwgX2VzLmNvbm5lY3QpKG51bGwsIHsgZ2V0Q2xvdWRpbmFyeURhdGE6IF9hY3Rpb25zLmdldENsb3VkaW5hcnlEYXRhIH0pKCgwLCBfd3JhcHBlci5Vc2VySXNBdXRoZW50aWNhdGVkKSgoMCwgX3JlYWN0UmVkdXhNdWx0aWxpbmd1YWwud2l0aFRyYW5zbGF0ZSkoX1NpZGViYXIyLmRlZmF1bHQpKSk7XG5cbi8qKiovIH1cblxufSk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIDAuMjg0OGQ3Yjk1MzVlZTdkZDFlZDUuanMiLCJpbXBvcnQgeyB0b2FzdHIgfSBmcm9tICdyZWFjdC1yZWR1eC10b2FzdHInO1xuaW1wb3J0IHsgQ0xPVURJTkFSWV9EQVRBLCBEQVRBQkFTRV9JTUFHRVMgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IGZldGNoRnJvbUJhY2tFbmQsIHNlbmRUb0JhY2tFbmQgfSBmcm9tICcuL2FwaU1ldGhvZHMnO1xuXG5leHBvcnQgY29uc3QgZ2V0Q2xvdWRpbmFyeURhdGEgPSAoZXJyb3IsIHJlc3VsdCkgPT4gKFxuICB7XG4gICAgdHlwZTogQ0xPVURJTkFSWV9EQVRBLFxuICAgIHByb21pc2U6IHNlbmRUb0JhY2tFbmQocmVzdWx0KSwgLy8gUE9TVCBSZXF1ZXN0IHRvIEFQSSBTZXJ2ZXJcbiAgICBtZXRhOiB7XG4gICAgICBvbkZhaWx1cmU6ICgpID0+IHRvYXN0ci53YXJuaW5nKCdGYWlsdXJlIScsICdVcGxvYWQgRmFpbGVkIScpLFxuICAgICAgb25TdWNjZXNzOiAoKSA9PiB0b2FzdHIuc3VjY2VzcygnU3VjY2VzcyEnLCAnU3VjY2Vzc2Z1bGx5IFVwbG9hZGVkIScpXG4gICAgfVxuICB9XG4pO1xuXG5leHBvcnQgY29uc3QgZ2V0RnJvbUJhY2tFbmQgPSAoKSA9PiAoXG4gIHtcbiAgICB0eXBlOiBEQVRBQkFTRV9JTUFHRVMsXG4gICAgcHJvbWlzZTogZmV0Y2hGcm9tQmFja0VuZCgpLCAvLyBHRVQgUmVxdWVzdCB0byBBUEkgU2VydmVyXG4gICAgbWV0YToge1xuICAgICAgb25GYWlsdXJlOiAoKSA9PiB0b2FzdHIud2FybmluZygnRmFpbHVyZSEnLCAnRGF0YWJhc2UgRXJyb3IuJyksXG4gICAgfVxuICB9XG4pO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vY2xpZW50L21vZHVsZXMvcGhvdG9ib290aC9hY3Rpb25zLmpzIiwiaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcblxuZXhwb3J0IGNvbnN0IHNlbmRUb0JhY2tFbmQgPSByZXN1bHQgPT4gKFxuICBheGlvcy5wb3N0KCcvbGlicmFyeScsIHsgcmVzdWx0IH0pXG4pO1xuXG5leHBvcnQgY29uc3QgZmV0Y2hGcm9tQmFja0VuZCA9ICgpID0+IChcbiAgYXhpb3MuZ2V0KCcvbGlicmFyeScpXG4pO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vY2xpZW50L21vZHVsZXMvcGhvdG9ib290aC9hcGlNZXRob2RzLmpzIiwiaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCwgUHJvcFR5cGVzIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgSW1hZ2UsIExhYmVsIH0gZnJvbSAnc2VtYW50aWMtdWktcmVhY3QnO1xuaW1wb3J0IHsgTG9hZGluZ1NjcmVlbiB9IGZyb20gJy4uLy4uLy4uL2NvbW1vbnMnO1xuXG5jbGFzcyBMaWJyYXJ5IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgLy8gcGVyZm9ybSBHRVQgUmVxdWVzdCBmb3IgYXBwZW5kaW5nIGltYWdlcy5cbiAgICB0aGlzLnByb3BzLmdldEZyb21CYWNrRW5kKCk7XG4gIH1cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHsgcGhvdG9zLCB0cmFuc2xhdGUgfSA9IHRoaXMucHJvcHM7XG4gICAgaWYgKCFwaG90b3MuaXNGZXRjaGVkKSByZXR1cm4gPExvYWRpbmdTY3JlZW4gLz47XG5cbiAgICAvLyBXaGVyZSBhcnJheSBvZiBvYmplY3QocykgaXMgcHJvY2Vzc2VkIGZvciByZW5kZXJpbmcvcmUtcmVuZGVyaW5nLlxuICAgIGNvbnN0IGltYWdlcyA9IHBob3Rvcy5zZXJ2ZXIucmVkdWNlKChhcnJheSwgaXRlbSkgPT4ge1xuICAgICAgY29uc3QgeyBfaWQsIHVybCB9ID0gaXRlbTtcbiAgICAgIGlmICghdXJsKSB7XG4gICAgICAgIGFycmF5LnB1c2goXG4gICAgICAgICAgPEltYWdlIGtleT17X2lkfSBzaXplPSd0aW55Jz5cbiAgICAgICAgICAgIDxMYWJlbCBjb250ZW50PSdJbWFnZSBub3QgZm91bmQhJyBpY29uPSd3YXJuaW5nJyAvPlxuICAgICAgICAgIDwvSW1hZ2U+XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBhcnJheS5wdXNoKFxuICAgICAgICA8SW1hZ2VcbiAgICAgICAgICBrZXk9e19pZH1cbiAgICAgICAgICBzcmM9e3VybH1cbiAgICAgICAgLz5cbiAgICAgICk7XG4gICAgICByZXR1cm4gYXJyYXk7XG4gICAgfSwgW10pO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdsaWJyYXJ5Jz5cbiAgICAgICAge3Bob3Rvcy5zZXJ2ZXIubGVuZ3RoID09PSAwID8gKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaW5pdGlhbFwiPlxuICAgICAgICAgICAgPGgxPnt0cmFuc2xhdGUoJ25vLWltZycpfTwvaDE+XG4gICAgICAgICAgICA8aDE+e3RyYW5zbGF0ZSgndXBsb2FkLXByb21wdCcpfTwvaDE+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICkgOiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbWFnZXNcIj5cbiAgICAgICAgICAgICAgPEltYWdlLkdyb3VwIHNpemU9J3RpbnknPlxuICAgICAgICAgICAgICAgIHtpbWFnZXN9XG4gICAgICAgICAgICAgIDwvSW1hZ2UuR3JvdXA+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG59XG5cbkxpYnJhcnkucHJvcFR5cGVzID0ge1xuICBnZXRGcm9tQmFja0VuZDogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgcGhvdG9zOiBQcm9wVHlwZXMub2JqZWN0LFxuICB0cmFuc2xhdGU6IFByb3BUeXBlcy5mdW5jXG59O1xuXG5leHBvcnQgZGVmYXVsdCBMaWJyYXJ5O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vY2xpZW50L21vZHVsZXMvcGhvdG9ib290aC9saWJyYXJ5L0xpYnJhcnkuanMiLCJpbXBvcnQgeyBjb25uZWN0IH0gZnJvbSAncmVhY3QtcmVkdXgvZXMnO1xuaW1wb3J0IHsgd2l0aFRyYW5zbGF0ZSB9IGZyb20gJ3JlYWN0LXJlZHV4LW11bHRpbGluZ3VhbCc7XG5pbXBvcnQgTGlicmFyeSBmcm9tICcuL0xpYnJhcnknO1xuaW1wb3J0IHsgZ2V0RnJvbUJhY2tFbmQgfSBmcm9tICcuLi9hY3Rpb25zJztcblxuY29uc3QgbWFwU3RhdGVUb1Byb3BzID0gKHsgcGhvdG8gfSkgPT4gKFxuICB7IHBob3RvczogcGhvdG8gfVxuKTtcblxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdChcbiAgbWFwU3RhdGVUb1Byb3BzLFxuICB7IGdldEZyb21CYWNrRW5kIH1cbikod2l0aFRyYW5zbGF0ZShMaWJyYXJ5KSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9jbGllbnQvbW9kdWxlcy9waG90b2Jvb3RoL2xpYnJhcnkvTGlicmFyeUNvbnRhaW5lci5qcyIsImltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQsIFByb3BUeXBlcyB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IFNpZGViYXIsIFNlZ21lbnQsIE1lbnUsIEljb24gfSBmcm9tICdzZW1hbnRpYy11aS1yZWFjdCc7XG5pbXBvcnQgTGlicmFyeUNvbnRhaW5lciBmcm9tICcuLi9saWJyYXJ5L0xpYnJhcnlDb250YWluZXInO1xuaW1wb3J0IHsgb3BlbldpZGdldCB9IGZyb20gJy4uLy4uLy4uL3V0aWxzJztcblxuY2xhc3MgU2lkZUJhciBleHRlbmRzIENvbXBvbmVudCB7XG4gIHN0YXRlID0geyB2aXNpYmxlOiB0cnVlIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyB2aXNpYmxlIH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IHsgZ2V0Q2xvdWRpbmFyeURhdGEsIHRyYW5zbGF0ZSB9ID0gdGhpcy5wcm9wcztcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9J3NpZGViYXInPlxuICAgICAgICA8U2lkZWJhci5QdXNoYWJsZSBhcz17U2VnbWVudH0+XG4gICAgICAgICAgPFNpZGViYXJcbiAgICAgICAgICAgIGFzPXtNZW51fVxuICAgICAgICAgICAgd2lkdGg9J3RoaW4nXG4gICAgICAgICAgICBpY29uPSdsYWJlbGVkJ1xuICAgICAgICAgICAgdmlzaWJsZT17dmlzaWJsZX1cbiAgICAgICAgICAgIHZlcnRpY2FsXG4gICAgICAgICAgICBpbnZlcnRlZFxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxNZW51Lkl0ZW0gbmFtZT0ndXBsb2FkJz5cbiAgICAgICAgICAgICAgPEljb25cbiAgICAgICAgICAgICAgICBuYW1lPSdjbG91ZCB1cGxvYWQnXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gb3BlbldpZGdldChnZXRDbG91ZGluYXJ5RGF0YSl9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIHt0cmFuc2xhdGUoJ3VwbG9hZCcpfVxuICAgICAgICAgICAgPC9NZW51Lkl0ZW0+XG4gICAgICAgICAgICA8TWVudS5JdGVtIG5hbWU9J2ZpbHRlcic+XG4gICAgICAgICAgICAgIDxJY29uIG5hbWU9J2ZpbHRlcicgLz5cbiAgICAgICAgICAgICAge3RyYW5zbGF0ZSgnZmlsdGVyJyl9XG4gICAgICAgICAgICA8L01lbnUuSXRlbT5cbiAgICAgICAgICAgIDxNZW51Lkl0ZW0gbmFtZT0nY2hhdCc+XG4gICAgICAgICAgICAgIDxJY29uIG5hbWU9J2NoYXQnIC8+XG4gICAgICAgICAgICAgIHt0cmFuc2xhdGUoJ2NoYXQnKX1cbiAgICAgICAgICAgIDwvTWVudS5JdGVtPlxuICAgICAgICAgICAgPE1lbnUuSXRlbSBuYW1lPSdoZWxwJz5cbiAgICAgICAgICAgICAgPEljb24gbmFtZT0naGVscCcgLz5cbiAgICAgICAgICAgICAge3RyYW5zbGF0ZSgnaGVscCcpfVxuICAgICAgICAgICAgPC9NZW51Lkl0ZW0+XG4gICAgICAgICAgPC9TaWRlYmFyPlxuICAgICAgICAgIDxTaWRlYmFyLlB1c2hlcj5cbiAgICAgICAgICAgIDxTZWdtZW50IGJhc2ljPlxuICAgICAgICAgICAgICA8TGlicmFyeUNvbnRhaW5lciAvPlxuICAgICAgICAgICAgPC9TZWdtZW50PlxuICAgICAgICAgIDwvU2lkZWJhci5QdXNoZXI+XG4gICAgICAgIDwvU2lkZWJhci5QdXNoYWJsZT5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn1cblxuU2lkZWJhci5wcm9wVHlwZXMgPSB7XG4gIGRlZmF1bHRWaXNpYmxlOiBQcm9wVHlwZXMuYm9vbCxcbiAgZ2V0Q2xvdWRpbmFyeURhdGE6IFByb3BUeXBlcy5mdW5jLFxuICB0cmFuc2xhdGU6IFByb3BUeXBlcy5mdW5jLFxuICB2aXNpYmxlOiBQcm9wVHlwZXMuYm9vbFxufTtcblxuZXhwb3J0IGRlZmF1bHQgU2lkZUJhcjtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2NsaWVudC9tb2R1bGVzL3Bob3RvYm9vdGgvc2lkZWJhci9TaWRlYmFyLmpzIiwiaW1wb3J0IHsgY29ubmVjdCB9IGZyb20gJ3JlYWN0LXJlZHV4L2VzJztcbmltcG9ydCB7IHdpdGhUcmFuc2xhdGUgfSBmcm9tICdyZWFjdC1yZWR1eC1tdWx0aWxpbmd1YWwnO1xuaW1wb3J0IHsgVXNlcklzQXV0aGVudGljYXRlZCB9IGZyb20gJy4uLy4uL2F1dGgvd3JhcHBlcic7XG5pbXBvcnQgU2lkZWJhciBmcm9tICcuL1NpZGViYXInO1xuaW1wb3J0IHsgZ2V0Q2xvdWRpbmFyeURhdGEgfSBmcm9tICcuLi9hY3Rpb25zJztcblxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdChcbiAgbnVsbCxcbiAgeyBnZXRDbG91ZGluYXJ5RGF0YSB9XG4pKFVzZXJJc0F1dGhlbnRpY2F0ZWQod2l0aFRyYW5zbGF0ZShTaWRlYmFyKSkpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vY2xpZW50L21vZHVsZXMvcGhvdG9ib290aC9zaWRlYmFyL1NpZGViYXJDb250YWluZXIuanMiXSwic291cmNlUm9vdCI6IiJ9